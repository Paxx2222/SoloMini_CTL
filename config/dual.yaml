# Dual motor configuration for tracked vehicle (left/right)
# Save as: dual.yaml
solo_node_left:
  ros__parameters:
    motor_id: "left"
    device: "/dev/solo_mc_1"
    transport:
      backend: "boost_asio"
    serial:
      baudrate: 115200
      timeout_ms: 50
    control:
      default_mode: "speed"
      ramp_rate: 50.0
      jerk_limit: 0.0
      position_relative: false
    limits:
      max_speed_rad_s: 20
      max_torque_nm: 18
      max_current_a: 3
      dc_bus_volt_min: 12.0
      dc_bus_volt_max: 54.0
      thermal_derate_start_c: 75.0
      thermal_shutdown_c: 90.0
    motor:
      type: "bldc"
      pole_pairs: 15
      kv_rpm_per_volt: 400.0
      has_halls: false
      has_encoder: true
      encoder_cpr: 4096
      
      gear_ratio: 1.0
    pid:
      speed:   {p: 0.2, i: 0.01, d: 0.0, ff: 0.0}
      torque:  {p: 0.1, i: 0.00, d: 0.0, ff: 0.0}
      position:{p: 2.0, i: 0.00, d: 0.0, ff: 0.0}
    publish:
      rate_hz: 50.0
      diagnostics_hz: 1.0
    safety:
      enable_watchdog: true
      watchdog_timeout_s: 0.25
      estop_topic: "/estop"
      stop_on_fault: true
      soft_stop_ramp_s: 0.2

solo_node_right:
  ros__parameters:
    motor_id: "right"
    device: "/dev/solo_mc_2"
    transport:
      backend: "boost_asio"
    serial:
      baudrate: 115200
      timeout_ms: 50
    control:
      default_mode: "speed"
      ramp_rate: 50.0
      jerk_limit: 0.0
      position_relative: false
    limits:
      max_speed_rad_s: 20
      max_torque_nm: 18
      max_current_a: 3
      dc_bus_volt_min: 12.0
      dc_bus_volt_max: 54.0
      thermal_derate_start_c: 75.0
      thermal_shutdown_c: 90.0
    motor:
      type: "bldc"
      pole_pairs: 15
      kv_rpm_per_volt: 400.0
      has_encoder: true
      encoder_cpr: 4096
      gear_ratio: 1.0
    pid:
      speed:   {p: 0.2, i: 0.01, d: 0.0, ff: 0.0}
      torque:  {p: 0.1, i: 0.00, d: 0.0, ff: 0.0}
      position:{p: 2.0, i: 0.00, d: 0.0, ff: 0.0}
    publish:
      rate_hz: 50.0
      diagnostics_hz: 1.0
    safety:
      enable_watchdog: true
      watchdog_timeout_s: 0.25
      estop_topic: "/estop"
      stop_on_fault: true
      soft_stop_ramp_s: 0.2

tracked_control_node:
  ros__parameters:
    left_motor_namespace: "/left"
    right_motor_namespace: "/right"
    mode: "speed"
    kinematics:
      track_width_m: 0.45
      wheel_radius_m: 0.085
      gear_ratio: 1.0
    limiters:
      max_linear_mps: 0.8
      max_angular_rps: 1.8
      accel_linear_mps2: 1.0
      accel_angular_rps2: 2.5
    mixing:
      open_loop: false
      deadband: 0.01
