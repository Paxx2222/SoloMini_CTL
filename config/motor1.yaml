# Single motor configuration (SOLO Mini v2 over USB)
# Save as: motor1.yaml
solo_node:
  ros__parameters:
    motor_id: "left"
    device: "/dev/solo_mc_1"           # default symlink; change via udev if needed
    transport:
      backend: "boost_asio"            # serial/USB backend choice (e.g., boost_asio)
    serial:
      baudrate: 115200
      timeout_ms: 50
    control:
      default_mode: "speed"            # speed|torque|position
      ramp_rate: 50.0                  # rad/s^2 accel limit
      jerk_limit: 0.0                  # set >0.0 if controller supports jerk limiting
      position_relative: false         # true => command_position treated as relative
    limits:
      max_speed_rad_s: 20.0
      max_torque_nm: 18

      max_current_a: 3
      dc_bus_volt_min: 12.0
      dc_bus_volt_max: 54.0
      thermal_derate_start_c: 75.0
      thermal_shutdown_c: 90.0
    motor:
      type: "bldc"                     # bldc|brushed (per SOLO config)
      pole_pairs: 15
      kv_rpm_per_volt: 400.0
      has_halls: false
      encoder_cpr: 4096
      has_encoder: true
      gear_ratio: 1.0
    pid:
      speed:   {p: 0.2, i: 0.01, d: 0.0, ff: 0.0}
      torque:  {p: 0.1, i: 0.00, d: 0.0, ff: 0.0}
      position:{p: 2.0, i: 0.00, d: 0.0, ff: 0.0}
    publish:
      rate_hz: 50.0
      diagnostics_hz: 1.0
    safety:
      enable_watchdog: true
      watchdog_timeout_s: 0.25
      estop_topic: "/estop"            # std_msgs/Bool (true=stop)
      stop_on_fault: true
      soft_stop_ramp_s: 0.2
    persist_to_flash_on_start: false
